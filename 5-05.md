# Домашнее задание к занятию "Разбор скриптов и написание своих скриптов. Linter. Shell check."

### Цель задания
В результате выполнения этого задания вы:
1. Научитесь контролировать передачу пользователем параметров скрипту
2. Научитесь проверять входные данные
3. Научитесь проверять, что скрипт запущен с повышенными привелегиями 
------

### Чеклист готовности к домашнему заданию

1. Установлена операционная система Ubuntu на виртуальную машину или локально и имеется доступ к терминалу (удаленный или из графической оболочки)
2. Установлена утилита arping (sudo apt install -y arping)
3. Просмотрены коды скриптов, расположенные по [ссылке](5-05/)
------

### Инструкция к заданию

1. Для успешного выполнения задания необходимо исправить приведенный bash-скрипт
2. На проверку необходимо направить код скрипта и скриншот, демонстрирующий различные сценарии работы данного скрипта.

------

### Задание 1.


Дан скрипт:

```bash
#!/bin/bash
PREFIX="${1:-NOT_SET}"
INTERFACE="$2"

[[ "$PREFIX" = "NOT_SET" ]] && { echo "\$PREFIX must be passed as first positional argument"; exit 1; }
if [[ -z "$INTERFACE" ]]; then
    echo "\$INTERFACE must be passed as second positional argument"
    exit 1
fi

for SUBNET in {1..255}
do
	for HOST in {1..255}
	do
		echo "[*] IP : ${PREFIX}.${SUBNET}.${HOST}"
		arping -c 3 -i "$INTERFACE" "${PREFIX}.${SUBNET}.${HOST}" 2> /dev/null
	done
done
```


Измените скрипт так, чтобы:

- для ввода пользователем были доступны все параметры. Помимо существующих PREFIX и INTERFACE, сделайте возможность задавать пользователю SUBNET и HOST;
- скрипт должен работать корректно в случае прередачи туда только PREFIX и INTERFACE
- скрипт должен сканировать только одну подсеть, если переданы параметры PREFIX, INTERFACE и SUBNET
- скрипт должен сканировать только один IP-адрес, если переданы PREFIX, INTERFACE, SUBNET и HOST
- не забывайте проверять вводимые пользователем параметры с помощью регулярных выражений и знака `~=` в условных операторах 
- проверьте, что скрипт запускается с повышенными привелегиями и сообщите пользователю, если скрипт запускается без них

------

## Дополнительные задания (со звездочкой*)

Эти задания дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.

### Задание 2.

Измените скрипт из Задания 1 так, чтобы:

- единственным параметром для ввода остался сетевой интерфейс;
- определите подсеть и маску с помощью утилиты `ip a` или `ifconfig`
- сканируйте с помощью arping адреса только в этой подсети
- не забывайте проверять в начале работы скрипта, что введенный интерфейс существует 
- воспользуйтесь shellcheck для улучшения качества своего кода


------

### Правила приема работы
**Домашнее задание выполните в Google Docs и отправьте в личном кабинете на проверку ссылку на ваш документ.**

Название файла должно содержать название лекции и фамилию студента. Пример названия: "Программирование на Bash : Переменные и условные операторы - Иван Иванов"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

------
### Критерии оценки

Зачет - выполнены все задания, приложен скрипт, приложены соответствующие скриншоты, в выполненных заданиях нет противоречий и нарушения логики

На доработку - задание выполнено частично или не выполнено, в логике выполнения заданий есть противоречия, существенные недостатки, нарушена методология.

------

### Полезные ссылки

Файлы, рассматриваемые на лекции находятся по [ссылке](5-05/)
